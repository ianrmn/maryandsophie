
if(typeof Object.create!=="function"){Object.create=function(obj){function F(){}F.prototype=obj;return new F()}}(function($,window,document,undefined){var EZP={init:function(options,elem){var self=this;var $galleries;self.elem=elem;self.$elem=$(elem);self.options=$.extend({},$.fn.ezPlus.options,self.responsiveConfig(options||{}));self.imageSrc=self.$elem.data(self.options.attrImageZoomSrc)?self.$elem.data(self.options.attrImageZoomSrc):self.$elem.attr("src");if(!self.options.enabled){return}if(self.options.tint){self.options.lensColour="none";self.options.lensOpacity="1"}if(self.options.sviZoomType==="inner"){self.options.showLens=false}if(self.options.sviZoomId===-1){self.options.sviZoomId=generateUUID()}self.$elem.parent().removeAttr("title").removeAttr("alt");self.sviZoomImage=self.imageSrc;self.refresh(1);if(self.options.loadingIcon&&!self.spinner){self.spinner=$('<div class="sviLoader" style="position: absolute; left: 0; top:0px"></div>');self.$elem.after(self.spinner);$("div#woosvimain .swiper-slide-active img, div#woosvimain>img").fadeTo("fast",0.5);self.spinner.show()}else{if(self.spinner){self.spinner.show()}}$galleries=$(self.options.gallery?("#"+self.options.gallery):self.options.gallerySelector);$galleries.on("click.sviZoom",self.options.galleryItem,function(e){if(self.options.galleryActiveClass){$(self.options.galleryItem,$galleries).removeClass(self.options.galleryActiveClass);$(this).addClass(self.options.galleryActiveClass)}if(this.tagName==="A"){e.preventDefault()}if($(this).data(self.options.attrImageZoomSrc)){self.sviZoomImagePre=$(this).data(self.options.attrImageZoomSrc)}else{self.sviZoomImagePre=$(this).data("image")}self.swaptheimage($(this).data("image"),self.sviZoomImagePre);if(this.tagName==="A"){return false}});function generateUUID(){var d=new Date().getTime();var uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c=="x"?r:(r&3|8)).toString(16)});return uuid}},refresh:function(length){var self=this;setTimeout(function(){self.fetch(self.imageSrc,self.$elem,self.options.minZoomLevel)},length||self.options.refresh)},fetch:function(imgsrc,element,minZoom){var self=this;var newImg=new Image();newImg.onload=function(){if(newImg.width/element.width()<=minZoom){self.largeWidth=element.width()*minZoom}else{self.largeWidth=newImg.width}if(newImg.height/element.height()<=minZoom){self.largeHeight=element.height()*minZoom}else{self.largeHeight=newImg.height}self.startZoom();self.currentImage=self.imageSrc;self.options.onZoomedImageLoaded(self.$elem);if(self.options.loadingIcon&&!!self.spinner&&!!self.spinner.length){$("div#woosvimain .swiper-slide-active img, div#woosvimain>img").fadeTo("fast",1,function(){self.spinner.hide()})}};self.setImageSource(newImg,imgsrc);return},setImageSource:function(image,src){image.src=src},startZoom:function(){var self=this;self.nzWidth=self.$elem.width();self.nzHeight=self.$elem.height();self.isWindowActive=false;self.isLensActive=false;self.isTintActive=false;self.overWindow=false;if(self.options.imageCrossfade){self.sviZoomWrap=self.$elem.wrap('<div style="height:'+self.nzHeight+"px;width:"+self.nzWidth+'px;" class="sviZoomWrapper" />');self.$elem.css("position","absolute")}self.sviZoomLock=1;self.scrollingLock=false;self.changeBgSize=false;self.currentZoomLevel=self.options.sviZoomLevel;self.nzOffset=self.$elem.offset();self.widthRatio=(self.largeWidth/self.currentZoomLevel)/self.nzWidth;self.heightRatio=(self.largeHeight/self.currentZoomLevel)/self.nzHeight;function getWindowZoomStyle(){return"overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(self.options.sviZoomWindowBgColour)+";width: "+String(self.options.sviZoomWindowWidth)+"px;height: "+String(self.options.sviZoomWindowHeight)+"px;float: left;background-size: "+self.largeWidth/self.currentZoomLevel+"px "+self.largeHeight/self.currentZoomLevel+"px;display: none;z-index:100;border: "+String(self.options.borderSize)+"px solid "+self.options.borderColour+";background-repeat: no-repeat;position: absolute;"}if(self.options.sviZoomType==="window"){self.sviZoomWindowStyle=getWindowZoomStyle()}function getInnerZoomStyle(){var borderWidth=self.$elem.css("border-left-width");return"overflow: hidden;margin-left: "+String(borderWidth)+";margin-top: "+String(borderWidth)+";background-position: 0px 0px;width: "+String(self.nzWidth)+"px;height: "+String(self.nzHeight)+"px;float: left;display: none;cursor:"+(self.options.cursor)+";border: "+String(self.options.borderSize)+"px solid "+self.options.borderColour+";background-repeat: no-repeat;position: absolute;"}if(self.options.sviZoomType==="inner"){self.sviZoomWindowStyle=getInnerZoomStyle()}function getWindowLensStyle(){if(self.nzHeight<self.options.sviZoomWindowHeight/self.heightRatio){self.lensHeight=self.nzHeight}else{self.lensHeight=String(self.options.sviZoomWindowHeight/self.heightRatio)}if(self.largeWidth<self.options.sviZoomWindowWidth){self.lensWidth=self.nzWidth}else{self.lensWidth=String(self.options.sviZoomWindowWidth/self.widthRatio)}return"background-position: 0px 0px;width: "+String((self.options.sviZoomWindowWidth)/self.widthRatio)+"px;height: "+String((self.options.sviZoomWindowHeight)/self.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;opacity:"+(self.options.lensOpacity)+";filter: alpha(opacity = "+(self.options.lensOpacity*100)+"); sviZoom:1;width:"+self.lensWidth+"px;height:"+self.lensHeight+"px;background-color:"+(self.options.lensColour)+";cursor:"+(self.options.cursor)+";border: "+(self.options.lensBorderSize)+"px solid "+(self.options.lensBorderColour)+";background-repeat: no-repeat;position: absolute;"}if(self.options.sviZoomType==="window"){self.lensStyle=getWindowLensStyle()}self.tintStyle="display: block;position: absolute;background-color: "+self.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+self.nzWidth+"px;height: "+self.nzHeight+"px;";self.lensRound="";if(self.options.sviZoomType==="lens"){self.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(self.options.borderSize)+"px solid "+self.options.borderColour+";width:"+String(self.options.lensSize)+"px;height:"+String(self.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"}if(self.options.lensShape==="round"){self.lensRound="border-top-left-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;border-top-right-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;border-bottom-left-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;border-bottom-right-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;"}self.sviZoomContainer=$('<div class="sviZoomContainer" uuid="'+self.options.sviZoomId+'"style="position:absolute;left:'+self.nzOffset.left+"px;top:"+self.nzOffset.top+"px;height:"+self.nzHeight+"px;width:"+self.nzWidth+"px;z-index:"+self.options.zIndex+'"></div>');if(self.$elem.attr("id")){self.sviZoomContainer.attr("id",self.$elem.attr("id")+"-sviZoomContainer")}$(self.options.sviZoomContainerAppendTo).append(self.sviZoomContainer);if(self.options.containLensZoom&&self.options.sviZoomType==="lens"){self.sviZoomContainer.css("overflow","hidden")}if(self.options.sviZoomType!=="inner"){self.sviZoomLens=$('<div class="sviZoomLens" style="'+self.lensStyle+self.lensRound+'">&nbsp;</div>').appendTo(self.sviZoomContainer).click(function(){self.$elem.trigger("click")});if(self.options.tint){self.tintContainer=$("<div/>").addClass("tintContainer");self.sviZoomTint=$('<div class="sviZoomTint" style="'+self.tintStyle+'"></div>');self.sviZoomLens.wrap(self.tintContainer);self.sviZoomTintcss=self.sviZoomLens.after(self.sviZoomTint);self.sviZoomTintImage=$('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+self.nzWidth+"px; height: "+self.nzHeight+'px;" src="'+self.imageSrc+'">').appendTo(self.sviZoomLens).click(function(){self.$elem.trigger("click")})}}var targetZoomContainer=isNaN(self.options.sviZoomWindowPosition)?"body":self.sviZoomContainer;self.sviZoomWindow=$('<div style="z-index:999;left:'+(self.windowOffsetLeft)+"px;top:"+(self.windowOffsetTop)+"px;"+self.sviZoomWindowStyle+'" class="sviZoomWindow">&nbsp;</div>').appendTo(targetZoomContainer).click(function(){self.$elem.trigger("click")});self.sviZoomWindowContainer=$("<div/>").addClass("sviZoomWindowContainer").css("width",self.options.sviZoomWindowWidth);self.sviZoomWindow.wrap(self.sviZoomWindowContainer);if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-image",'url("'+self.imageSrc+'")')}if(self.options.sviZoomType==="window"){self.sviZoomWindow.css("background-image",'url("'+self.imageSrc+'")')}if(self.options.sviZoomType==="inner"){self.sviZoomWindow.css("background-image",'url("'+self.imageSrc+'")')}if(self.options.touchEnabled){self.$elem.bind("touchmove.ezpspace",function(e){e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch)});self.sviZoomContainer.bind("touchmove.ezpspace",function(e){if(self.options.sviZoomType==="inner"){self.showHideWindow("show")}e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch)});self.sviZoomContainer.bind("touchend.ezpspace",function(e){self.showHideWindow("hide");if(self.options.showLens){self.showHideLens("hide")}if(self.options.tint&&self.options.sviZoomType!=="inner"){self.showHideTint("hide")}});self.$elem.bind("touchend.ezpspace",function(e){self.showHideWindow("hide");if(self.options.showLens){self.showHideLens("hide")}if(self.options.tint&&self.options.sviZoomType!=="inner"){self.showHideTint("hide")}});if(self.options.showLens){self.sviZoomLens.bind("touchmove.ezpspace",function(e){e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch)});self.sviZoomLens.bind("touchend.ezpspace",function(e){self.showHideWindow("hide");if(self.options.showLens){self.showHideLens("hide")}if(self.options.tint&&self.options.sviZoomType!=="inner"){self.showHideTint("hide")}})}}self.$elem.bind("mousemove.ezpspace",function(e){if(self.overWindow===false){self.setElements("show")}if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e}self.lastX=e.clientX;self.lastY=e.clientY});self.sviZoomContainer.bind("click.ezpspace touchstart.ezpspace",self.options.onImageClick);self.sviZoomContainer.bind("mousemove.ezpspace",function(e){if(self.overWindow===false){self.setElements("show")}mouseMoveZoomHandler(e)});function mouseMoveZoomHandler(e){if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e}self.lastX=e.clientX;self.lastY=e.clientY}var elementToTrack=null;if(self.options.sviZoomType!=="inner"){elementToTrack=self.sviZoomLens}if(self.options.tint&&self.options.sviZoomType!=="inner"){elementToTrack=self.sviZoomTint}if(self.options.sviZoomType==="inner"){elementToTrack=self.sviZoomWindow}if(elementToTrack){elementToTrack.bind("mousemove.ezpspace",mouseMoveZoomHandler)}self.sviZoomContainer.add(self.$elem).mouseenter(function(){if(self.overWindow===false){self.setElements("show")}}).mouseleave(function(){if(!self.scrollLock){self.setElements("hide");self.options.onDestroy(self.$elem)}});if(self.options.sviZoomType!=="inner"){self.sviZoomWindow.mouseenter(function(){self.overWindow=true;self.setElements("hide")}).mouseleave(function(){self.overWindow=false})}if(self.options.minZoomLevel){self.minZoomLevel=self.options.minZoomLevel}else{self.minZoomLevel=self.options.scrollZoomIncrement*2}if(self.options.scrollZoom){self.sviZoomContainer.add(self.$elem).bind("wheel DOMMouseScroll MozMousePixelScroll",function(e){self.scrollLock=true;clearTimeout($.data(this,"timer"));$.data(this,"timer",setTimeout(function(){self.scrollLock=false},250));var theEvent=e.originalEvent.deltaY||e.originalEvent.detail*-1;e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(theEvent==0){return false}if(theEvent/120>0){var nextZoomLevel=parseFloat(self.currentZoomLevel)-self.options.scrollZoomIncrement;if(nextZoomLevel>=parseFloat(self.minZoomLevel)){self.changeZoomLevel(nextZoomLevel)}}else{if((!self.fullheight&&!self.fullwidth)||!self.options.mantainZoomAspectRatio){var nextZoomLevel=parseFloat(self.currentZoomLevel)+self.options.scrollZoomIncrement;if(self.options.maxZoomLevel){if(nextZoomLevel<=self.options.maxZoomLevel){self.changeZoomLevel(nextZoomLevel)}}else{self.changeZoomLevel(nextZoomLevel)}}}return false})}},destroy:function(){var self=this;self.$elem.unbind("ezpspace");$(self.sviZoomContainer).remove();if(self.options.loadingIcon&&!!self.spinner&&!!self.spinner.length){self.spinner.remove();delete self.spinner}},getIdentifier:function(){var self=this;return self.options.sviZoomId},setElements:function(type){var self=this;if(!self.options.sviZoomEnabled){return false}if(type==="show"){if(self.isWindowSet){if(self.options.sviZoomType==="inner"){self.showHideWindow("show")}if(self.options.sviZoomType==="window"){self.showHideWindow("show")}if(self.options.showLens){self.showHideLens("show")}if(self.options.tint&&self.options.sviZoomType!=="inner"){self.showHideTint("show")}}}if(type==="hide"){if(self.options.sviZoomType==="window"){self.showHideWindow("hide")}if(!self.options.tint){self.showHideWindow("hide")}if(self.options.showLens){self.showHideLens("hide")}if(self.options.tint){self.showHideTint("hide")}}},setPosition:function(e){var self=this;if(!self.options.sviZoomEnabled){return false}self.nzHeight=self.$elem.height();self.nzWidth=self.$elem.width();self.nzOffset=self.$elem.offset();if(self.options.tint&&self.options.sviZoomType!=="inner"){self.sviZoomTint.css({top:0,left:0})}if(self.options.responsive&&!self.options.scrollZoom){if(self.options.showLens){var lensHeight,lensWidth;if(self.nzHeight<self.options.sviZoomWindowWidth/self.widthRatio){self.lensHeight=self.nzHeight}else{self.lensHeight=String((self.options.sviZoomWindowHeight/self.heightRatio))}if(self.largeWidth<self.options.sviZoomWindowWidth){self.lensWidth=self.nzWidth}else{self.lensWidth=(self.options.sviZoomWindowWidth/self.widthRatio)}self.widthRatio=self.largeWidth/self.nzWidth;self.heightRatio=self.largeHeight/self.nzHeight;if(self.options.sviZoomType!=="lens"){if(self.nzHeight<self.options.sviZoomWindowWidth/self.widthRatio){self.lensHeight=self.nzHeight}else{self.lensHeight=String((self.options.sviZoomWindowHeight/self.heightRatio))}if(self.nzWidth<self.options.sviZoomWindowHeight/self.heightRatio){self.lensWidth=self.nzWidth}else{self.lensWidth=String((self.options.sviZoomWindowWidth/self.widthRatio))}self.sviZoomLens.css({width:self.lensWidth,height:self.lensHeight});if(self.options.tint){self.sviZoomTintImage.css({width:self.nzWidth,height:self.nzHeight})}}if(self.options.sviZoomType==="lens"){self.sviZoomLens.css({width:String(self.options.lensSize)+"px",height:String(self.options.lensSize)+"px"})}}}self.sviZoomContainer.css({top:self.nzOffset.top,left:self.nzOffset.left,width:self.nzWidth,height:self.nzHeight});self.mouseLeft=parseInt(e.pageX-self.nzOffset.left);self.mouseTop=parseInt(e.pageY-self.nzOffset.top);if(self.options.sviZoomType==="window"){var sviZoomLensHeight=self.sviZoomLens.height()/2;var sviZoomLensWidth=self.sviZoomLens.width()/2;self.Etoppos=(self.mouseTop<0+sviZoomLensHeight);self.Eboppos=(self.mouseTop>self.nzHeight-sviZoomLensHeight-(self.options.lensBorderSize*2));self.Eloppos=(self.mouseLeft<0+sviZoomLensWidth);self.Eroppos=(self.mouseLeft>(self.nzWidth-sviZoomLensWidth-(self.options.lensBorderSize*2)))}if(self.options.sviZoomType==="inner"){self.Etoppos=(self.mouseTop<((self.nzHeight/2)/self.heightRatio));self.Eboppos=(self.mouseTop>(self.nzHeight-((self.nzHeight/2)/self.heightRatio)));self.Eloppos=(self.mouseLeft<0+(((self.nzWidth/2)/self.widthRatio)));self.Eroppos=(self.mouseLeft>(self.nzWidth-(self.nzWidth/2)/self.widthRatio-(self.options.lensBorderSize*2)))}if(self.mouseLeft<0||self.mouseTop<0||self.mouseLeft>self.nzWidth||self.mouseTop>self.nzHeight){self.setElements("hide");return}else{if(self.options.showLens){self.lensLeftPos=String(Math.floor(self.mouseLeft-self.sviZoomLens.width()/2));self.lensTopPos=String(Math.floor(self.mouseTop-self.sviZoomLens.height()/2))}if(self.Etoppos){self.lensTopPos=0}if(self.Eloppos){self.windowLeftPos=0;self.lensLeftPos=0;self.tintpos=0}if(self.options.sviZoomType==="window"){if(self.Eboppos){self.lensTopPos=Math.max((self.nzHeight)-self.sviZoomLens.height()-(self.options.lensBorderSize*2),0)}if(self.Eroppos){self.lensLeftPos=(self.nzWidth-(self.sviZoomLens.width())-(self.options.lensBorderSize*2))}}if(self.options.sviZoomType==="inner"){if(self.Eboppos){self.lensTopPos=Math.max(((self.nzHeight)-(self.options.lensBorderSize*2)),0)}if(self.Eroppos){self.lensLeftPos=(self.nzWidth-(self.nzWidth)-(self.options.lensBorderSize*2))}}if(self.options.sviZoomType==="lens"){self.windowLeftPos=String(((e.pageX-self.nzOffset.left)*self.widthRatio-self.sviZoomLens.width()/2)*(-1));self.windowTopPos=String(((e.pageY-self.nzOffset.top)*self.heightRatio-self.sviZoomLens.height()/2)*(-1));self.sviZoomLens.css("background-position",self.windowLeftPos+"px "+self.windowTopPos+"px");if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}else{if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}self.changeBgSize=false}self.setWindowPosition(e)}if(self.options.tint&&self.options.sviZoomType!=="inner"){self.setTintPosition(e)}if(self.options.sviZoomType==="window"){self.setWindowPosition(e)}if(self.options.sviZoomType==="inner"){self.setWindowPosition(e)}if(self.options.showLens){if(self.fullwidth&&self.options.sviZoomType!=="lens"){self.lensLeftPos=0}self.sviZoomLens.css({left:self.lensLeftPos+"px",top:self.lensTopPos+"px"})}}},showHideZoomContainer:function(change){var self=this;if(change==="show"){if(self.sviZoomContainer){self.sviZoomContainer.show()}}if(change==="hide"){if(self.sviZoomContainer){self.sviZoomContainer.hide()}}},showHideWindow:function(change){var self=this;if(change==="show"){if(!self.isWindowActive&&self.sviZoomWindow){self.options.onShow(self);if(self.options.sviZoomWindowFadeIn){self.sviZoomWindow.stop(true,true,false).fadeIn(self.options.sviZoomWindowFadeIn)}else{self.sviZoomWindow.show()}self.isWindowActive=true}}if(change==="hide"){if(self.isWindowActive){if(self.options.sviZoomWindowFadeOut){self.sviZoomWindow.stop(true,true).fadeOut(self.options.sviZoomWindowFadeOut,function(){if(self.loop){clearInterval(self.loop);self.loop=false}})}else{self.sviZoomWindow.hide()}self.isWindowActive=false}}},showHideLens:function(change){var self=this;if(change==="show"){if(!self.isLensActive){if(self.sviZoomLens){if(self.options.lensFadeIn){self.sviZoomLens.stop(true,true,false).fadeIn(self.options.lensFadeIn)}else{self.sviZoomLens.show()}}self.isLensActive=true}}if(change==="hide"){if(self.isLensActive){if(self.sviZoomLens){if(self.options.lensFadeOut){self.sviZoomLens.stop(true,true).fadeOut(self.options.lensFadeOut)}else{self.sviZoomLens.hide()}}self.isLensActive=false}}},showHideTint:function(change){var self=this;if(change==="show"){if(!self.isTintActive&&self.sviZoomTint){if(self.options.sviZoomTintFadeIn){self.sviZoomTint.css("opacity",self.options.tintOpacity).animate().stop(true,true).fadeIn("slow")}else{self.sviZoomTint.css("opacity",self.options.tintOpacity).animate();self.sviZoomTint.show()}self.isTintActive=true}}if(change==="hide"){if(self.isTintActive){if(self.options.sviZoomTintFadeOut){self.sviZoomTint.stop(true,true).fadeOut(self.options.sviZoomTintFadeOut)}else{self.sviZoomTint.hide()}self.isTintActive=false}}},setLensPosition:function(e){},setWindowPosition:function(e){var self=this;if(!isNaN(self.options.sviZoomWindowPosition)){switch(self.options.sviZoomWindowPosition){case 1:self.windowOffsetTop=(self.options.sviZoomWindowOffsetY);self.windowOffsetLeft=(+self.nzWidth);break;case 2:if(self.options.sviZoomWindowHeight>self.nzHeight){self.windowOffsetTop=((self.options.sviZoomWindowHeight/2)-(self.nzHeight/2))*(-1);self.windowOffsetLeft=(self.nzWidth)}else{$.noop()}break;case 3:self.windowOffsetTop=(self.nzHeight-self.sviZoomWindow.height()-(self.options.borderSize*2));self.windowOffsetLeft=(self.nzWidth);break;case 4:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=(self.nzWidth);break;case 5:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=(self.nzWidth-self.sviZoomWindow.width()-(self.options.borderSize*2));break;case 6:if(self.options.sviZoomWindowHeight>self.nzHeight){self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=((self.options.sviZoomWindowWidth/2)-(self.nzWidth/2)+(self.options.borderSize*2))*(-1)}else{$.noop()}break;case 7:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=0;break;case 8:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=(self.sviZoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 9:self.windowOffsetTop=(self.nzHeight-self.sviZoomWindow.height()-(self.options.borderSize*2));self.windowOffsetLeft=(self.sviZoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 10:if(self.options.sviZoomWindowHeight>self.nzHeight){self.windowOffsetTop=((self.options.sviZoomWindowHeight/2)-(self.nzHeight/2))*(-1);self.windowOffsetLeft=(self.sviZoomWindow.width()+(self.options.borderSize*2))*(-1)}else{$.noop()}break;case 11:self.windowOffsetTop=(self.options.sviZoomWindowOffsetY);self.windowOffsetLeft=(self.sviZoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 12:self.windowOffsetTop=(self.sviZoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(self.sviZoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 13:self.windowOffsetTop=(self.sviZoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(0);break;case 14:if(self.options.sviZoomWindowHeight>self.nzHeight){self.windowOffsetTop=(self.sviZoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=((self.options.sviZoomWindowWidth/2)-(self.nzWidth/2)+(self.options.borderSize*2))*(-1)}else{$.noop()}break;case 15:self.windowOffsetTop=(self.sviZoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(self.nzWidth-self.sviZoomWindow.width()-(self.options.borderSize*2));break;case 16:self.windowOffsetTop=(self.sviZoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(self.nzWidth);break;default:self.windowOffsetTop=(self.options.sviZoomWindowOffsetY);self.windowOffsetLeft=(self.nzWidth)}}else{self.externalContainer=$(self.options.sviZoomWindowPosition);if(!self.externalContainer.length){self.externalContainer=$("#"+self.options.sviZoomWindowPosition)}self.externalContainerWidth=self.externalContainer.width();self.externalContainerHeight=self.externalContainer.height();self.externalContainerOffset=self.externalContainer.offset();self.windowOffsetTop=self.externalContainerOffset.top;self.windowOffsetLeft=self.externalContainerOffset.left}self.isWindowSet=true;self.windowOffsetTop=self.windowOffsetTop+self.options.sviZoomWindowOffsetY;self.windowOffsetLeft=self.windowOffsetLeft+self.options.sviZoomWindowOffsetX;self.sviZoomWindow.css({top:self.windowOffsetTop,left:self.windowOffsetLeft});if(self.options.sviZoomType==="inner"){self.sviZoomWindow.css({top:0,left:0})}self.windowLeftPos=String(((e.pageX-self.nzOffset.left)*self.widthRatio-self.sviZoomWindow.width()/2)*(-1));self.windowTopPos=String(((e.pageY-self.nzOffset.top)*self.heightRatio-self.sviZoomWindow.height()/2)*(-1));if(self.Etoppos){self.windowTopPos=0}if(self.Eloppos){self.windowLeftPos=0}if(self.Eboppos){self.windowTopPos=(self.largeHeight/self.currentZoomLevel-self.sviZoomWindow.height())*(-1)}if(self.Eroppos){self.windowLeftPos=((self.largeWidth/self.currentZoomLevel-self.sviZoomWindow.width())*(-1))}if(self.fullheight){self.windowTopPos=0}if(self.fullwidth){self.windowLeftPos=0}if(self.options.sviZoomType==="window"||self.options.sviZoomType==="inner"){if(self.sviZoomLock===1){if(self.widthRatio<=1){self.windowLeftPos=0}if(self.heightRatio<=1){self.windowTopPos=0}}if(self.options.sviZoomType==="window"){if(self.largeHeight<self.options.sviZoomWindowHeight){self.windowTopPos=0}if(self.largeWidth<self.options.sviZoomWindowWidth){self.windowLeftPos=0}}if(self.options.easing){if(!self.xp){self.xp=0}if(!self.yp){self.yp=0}var interval=16;if(Number.isInteger(parseInt(self.options.easing))){interval=parseInt(self.options.easing)}if(!self.loop){self.loop=setInterval(function(){self.xp+=(self.windowLeftPos-self.xp)/self.options.easingAmount;self.yp+=(self.windowTopPos-self.yp)/self.options.easingAmount;if(self.scrollingLock){clearInterval(self.loop);self.xp=self.windowLeftPos;self.yp=self.windowTopPos;self.xp=((e.pageX-self.nzOffset.left)*self.widthRatio-self.sviZoomWindow.width()/2)*(-1);self.yp=(((e.pageY-self.nzOffset.top)*self.heightRatio-self.sviZoomWindow.height()/2)*(-1));if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}else{if(self.options.sviZoomType!=="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvalueheight+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}self.changeBgSize=false}self.sviZoomWindow.css("background-position",self.windowLeftPos+"px "+self.windowTopPos+"px");self.scrollingLock=false;self.loop=false}else{if(Math.round(Math.abs(self.xp-self.windowLeftPos)+Math.abs(self.yp-self.windowTopPos))<1){clearInterval(self.loop);self.sviZoomWindow.css("background-position",self.windowLeftPos+"px "+self.windowTopPos+"px");self.loop=false}else{if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}else{if(self.options.sviZoomType!=="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}self.changeBgSize=false}self.sviZoomWindow.css("background-position",self.xp+"px "+self.yp+"px")}}},interval)}}else{if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}self.sviZoomWindow.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}else{if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}if((self.largeHeight/self.newvaluewidth)<self.options.sviZoomWindowHeight){self.sviZoomWindow.css("background-size",self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px")}else{self.sviZoomWindow.css("background-size",self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px")}}self.changeBgSize=false}self.sviZoomWindow.css("background-position",self.windowLeftPos+"px "+self.windowTopPos+"px")}}},setTintPosition:function(e){var self=this;var sviZoomLensWidth=self.sviZoomLens.width();var sviZoomLensHeight=self.sviZoomLens.height();self.nzOffset=self.$elem.offset();self.tintpos=String(((e.pageX-self.nzOffset.left)-(sviZoomLensWidth/2))*(-1));self.tintposy=String(((e.pageY-self.nzOffset.top)-sviZoomLensHeight/2)*(-1));if(self.Etoppos){self.tintposy=0}if(self.Eloppos){self.tintpos=0}if(self.Eboppos){self.tintposy=(self.nzHeight-sviZoomLensHeight-(self.options.lensBorderSize*2))*(-1)}if(self.Eroppos){self.tintpos=((self.nzWidth-sviZoomLensWidth-(self.options.lensBorderSize*2))*(-1))}if(self.options.tint){if(self.fullheight){self.tintposy=0}if(self.fullwidth){self.tintpos=0}self.sviZoomTintImage.css({left:self.tintpos+"px",top:self.tintposy+"px"})}},swaptheimage:function(smallimage,largeimage){var self=this;var newImg=new Image();if(self.options.loadingIcon&&!self.spinner){var styleAttr="background: url('"+self.options.loadingIcon+"') no-repeat center;height:"+self.nzHeight+"px;width:"+self.nzWidth+"px;z-index: 2000;position: absolute; background-position: center center;";if(self.options.sviZoomType==="inner"){styleAttr+="top: 0px;"}self.spinner=$('<div class="ezp-spinner" style="'+styleAttr+'"></div>');self.$elem.after(self.spinner)}else{if(self.spinner){self.spinner.show()}}self.options.onImageSwap(self.$elem);newImg.onload=function(){self.largeWidth=newImg.width;self.largeHeight=newImg.height;self.sviZoomImage=largeimage;self.sviZoomWindow.css("background-size",self.largeWidth+"px "+self.largeHeight+"px");self.swapAction(smallimage,largeimage);return};self.setImageSource(newImg,largeimage)},swapAction:function(smallimage,largeimage){var self=this;var elemWidth=self.$elem.width();var elemHeight=self.$elem.height();var newImg2=new Image();newImg2.onload=function(){self.nzHeight=newImg2.height;self.nzWidth=newImg2.width;self.options.onImageSwapComplete(self.$elem);self.doneCallback();return};self.setImageSource(newImg2,smallimage);self.currentZoomLevel=self.options.sviZoomLevel;self.options.maxZoomLevel=false;if(self.options.sviZoomType==="lens"){self.sviZoomLens.css("background-image",'url("'+largeimage+'")')}if(self.options.sviZoomType==="window"){self.sviZoomWindow.css("background-image",'url("'+largeimage+'")')}if(self.options.sviZoomType==="inner"){self.sviZoomWindow.css("background-image",'url("'+largeimage+'")')}self.currentImage=largeimage;if(self.options.imageCrossfade){var oldImg=self.$elem;var newImg=oldImg.clone();self.$elem.attr("src",smallimage);self.$elem.after(newImg);newImg.stop(true).fadeOut(self.options.imageCrossfade,function(){$(this).remove()});self.$elem.width("auto").removeAttr("width");self.$elem.height("auto").removeAttr("height");oldImg.fadeIn(self.options.imageCrossfade);if(self.options.tint&&self.options.sviZoomType!=="inner"){var oldImgTint=self.sviZoomTintImage;var newImgTint=oldImgTint.clone();self.sviZoomTintImage.attr("src",largeimage);self.sviZoomTintImage.after(newImgTint);newImgTint.stop(true).fadeOut(self.options.imageCrossfade,function(){$(this).remove()});oldImgTint.fadeIn(self.options.imageCrossfade);self.sviZoomTint.css({height:elemHeight,width:elemWidth})}self.sviZoomContainer.css({height:elemHeight,width:elemWidth});if(self.options.sviZoomType==="inner"){if(!self.options.constrainType){self.sviZoomWrap.parent().css({height:elemHeight,width:elemWidth});self.sviZoomWindow.css({height:elemHeight,width:elemWidth})}}if(self.options.imageCrossfade){self.sviZoomWrap.css({height:elemHeight,width:elemWidth})}}else{self.$elem.attr("src",smallimage);if(self.options.tint){self.sviZoomTintImage.attr("src",largeimage);self.sviZoomTintImage.attr("height",elemHeight);self.sviZoomTintImage.css("height",elemHeight);self.sviZoomTint.css("height",elemHeight)}self.sviZoomContainer.css({height:elemHeight,width:elemWidth});if(self.options.imageCrossfade){self.sviZoomWrap.css({height:elemHeight,width:elemWidth})}}if(self.options.constrainType){if(self.options.constrainType==="height"){var autoWDimension={height:self.options.constrainSize,width:"auto"};self.sviZoomContainer.css(autoWDimension);if(self.options.imageCrossfade){self.sviZoomWrap.css(autoWDimension);self.constwidth=self.sviZoomWrap.width()}else{self.$elem.css(autoWDimension);self.constwidth=elemWidth}var constWDim={height:self.options.constrainSize,width:self.constwidth};if(self.options.sviZoomType==="inner"){self.sviZoomWrap.parent().css(constWDim);self.sviZoomWindow.css(constWDim)}if(self.options.tint){self.tintContainer.css(constWDim);self.sviZoomTint.css(constWDim);self.sviZoomTintImage.css(constWDim)}}if(self.options.constrainType==="width"){var autoHDimension={height:"auto",width:self.options.constrainSize};self.sviZoomContainer.css(autoHDimension);if(self.options.imageCrossfade){self.sviZoomWrap.css(autoHDimension);self.constheight=self.sviZoomWrap.height()}else{self.$elem.css(autoHDimension);self.constheight=elemHeight}var constHDim={height:self.constheight,width:self.options.constrainSize};if(self.options.sviZoomType==="inner"){self.sviZoomWrap.parent().css(constHDim);self.sviZoomWindow.css(constHDim)}if(self.options.tint){self.tintContainer.css(constHDim);self.sviZoomTint.css(constHDim);self.sviZoomTintImage.css(constHDim)}}}},doneCallback:function(){var self=this;if(self.options.loadingIcon&&!!self.spinner&&!!self.spinner.length){self.spinner.hide()}self.nzOffset=self.$elem.offset();self.nzWidth=self.$elem.width();self.nzHeight=self.$elem.height();self.currentZoomLevel=self.options.sviZoomLevel;self.widthRatio=self.largeWidth/self.nzWidth;self.heightRatio=self.largeHeight/self.nzHeight;if(self.options.sviZoomType==="window"){if(self.nzHeight<self.options.sviZoomWindowHeight/self.heightRatio){self.lensHeight=self.nzHeight}else{self.lensHeight=String((self.options.sviZoomWindowHeight/self.heightRatio))}if(self.nzWidth<self.options.sviZoomWindowWidth){self.lensWidth=self.nzWidth}else{self.lensWidth=(self.options.sviZoomWindowWidth/self.widthRatio)}if(self.sviZoomLens){self.sviZoomLens.css({width:self.lensWidth,height:self.lensHeight})}}},getCurrentImage:function(){var self=this;return self.sviZoomImage},getGalleryList:function(){var self=this;self.gallerylist=[];if(self.options.gallery){$("#"+self.options.gallery+" a").each(function(){var imgSrc="";if($(this).data(self.options.attrImageZoomSrc)){imgSrc=$(this).data(self.options.attrImageZoomSrc)}else{if($(this).data("image")){imgSrc=$(this).data("image")}}if(imgSrc===self.sviZoomImage){self.gallerylist.unshift({href:""+imgSrc+"",title:$(this).find("img").attr("title")})}else{self.gallerylist.push({href:""+imgSrc+"",title:$(this).find("img").attr("title")})}})}else{self.gallerylist.push({href:""+self.sviZoomImage+"",title:$(this).find("img").attr("title")})}return self.gallerylist},changeZoomLevel:function(value){var self=this;self.scrollingLock=true;self.newvalue=parseFloat(value).toFixed(2);var newvalue=self.newvalue;var maxheightnewvalue=self.largeHeight/((self.options.sviZoomWindowHeight/self.nzHeight)*self.nzHeight);var maxwidthtnewvalue=self.largeWidth/((self.options.sviZoomWindowWidth/self.nzWidth)*self.nzWidth);if(self.options.sviZoomType!=="inner"){if(maxheightnewvalue<=newvalue){self.heightRatio=(self.largeHeight/maxheightnewvalue)/self.nzHeight;self.newvalueheight=maxheightnewvalue;self.fullheight=true}else{self.heightRatio=(self.largeHeight/newvalue)/self.nzHeight;self.newvalueheight=newvalue;self.fullheight=false}if(maxwidthtnewvalue<=newvalue){self.widthRatio=(self.largeWidth/maxwidthtnewvalue)/self.nzWidth;self.newvaluewidth=maxwidthtnewvalue;self.fullwidth=true}else{self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;self.newvaluewidth=newvalue;self.fullwidth=false}if(self.options.sviZoomType==="lens"){if(maxheightnewvalue<=newvalue){self.fullwidth=true;self.newvaluewidth=maxheightnewvalue}else{self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;self.newvaluewidth=newvalue;self.fullwidth=false}}}if(self.options.sviZoomType==="inner"){maxheightnewvalue=parseFloat(self.largeHeight/self.nzHeight).toFixed(2);maxwidthtnewvalue=parseFloat(self.largeWidth/self.nzWidth).toFixed(2);if(newvalue>maxheightnewvalue){newvalue=maxheightnewvalue}if(newvalue>maxwidthtnewvalue){newvalue=maxwidthtnewvalue}if(maxheightnewvalue<=newvalue){self.heightRatio=(self.largeHeight/newvalue)/self.nzHeight;if(newvalue>maxheightnewvalue){self.newvalueheight=maxheightnewvalue}else{self.newvalueheight=newvalue}self.fullheight=true}else{self.heightRatio=(self.largeHeight/newvalue)/self.nzHeight;if(newvalue>maxheightnewvalue){self.newvalueheight=maxheightnewvalue}else{self.newvalueheight=newvalue}self.fullheight=false}if(maxwidthtnewvalue<=newvalue){self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;if(newvalue>maxwidthtnewvalue){self.newvaluewidth=maxwidthtnewvalue}else{self.newvaluewidth=newvalue}self.fullwidth=true}else{self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;self.newvaluewidth=newvalue;self.fullwidth=false}}var scrcontinue=false;if(self.options.sviZoomType==="inner"){if(self.nzWidth>=self.nzHeight){if(self.newvaluewidth<=maxwidthtnewvalue){scrcontinue=true}else{scrcontinue=false;self.fullheight=true;self.fullwidth=true}}if(self.nzHeight>self.nzWidth){if(self.newvaluewidth<=maxwidthtnewvalue){scrcontinue=true}else{scrcontinue=false;self.fullheight=true;self.fullwidth=true}}}if(self.options.sviZoomType!=="inner"){scrcontinue=true}if(scrcontinue){self.sviZoomLock=0;self.changeZoom=true;if(((self.options.sviZoomWindowHeight)/self.heightRatio)<=self.nzHeight){self.currentZoomLevel=self.newvalueheight;if(self.options.sviZoomType!=="lens"&&self.options.sviZoomType!=="inner"){self.changeBgSize=true;self.sviZoomLens.css("height",String(self.options.sviZoomWindowHeight/self.heightRatio)+"px")}if(self.options.sviZoomType==="lens"||self.options.sviZoomType==="inner"){self.changeBgSize=true}}if((self.options.sviZoomWindowWidth/self.widthRatio)<=self.nzWidth){if(self.options.sviZoomType!=="inner"){if(self.newvaluewidth>self.newvalueheight){self.currentZoomLevel=self.newvaluewidth}}if(self.options.sviZoomType!=="lens"&&self.options.sviZoomType!=="inner"){self.changeBgSize=true;self.sviZoomLens.css("width",String(self.options.sviZoomWindowWidth/self.widthRatio)+"px")}if(self.options.sviZoomType==="lens"||self.options.sviZoomType==="inner"){self.changeBgSize=true}}if(self.options.sviZoomType==="inner"){self.changeBgSize=true;if(self.nzWidth>self.nzHeight){self.currentZoomLevel=self.newvaluewidth}else{if(self.nzHeight>=self.nzWidth){self.currentZoomLevel=self.newvaluewidth}}}}self.setPosition(self.currentLoc)},closeAll:function(){var self=this;if(self.sviZoomWindow){self.sviZoomWindow.hide()}if(self.sviZoomLens){self.sviZoomLens.hide()}if(self.sviZoomTint){self.sviZoomTint.hide()}},changeState:function(value){var self=this;if(value==="enable"){self.options.sviZoomEnabled=true}if(value==="disable"){self.options.sviZoomEnabled=false}},responsiveConfig:function(options){if(options.respond&&options.respond.length>0){return $.extend({},options,this.configByScreenWidth(options))}return options},configByScreenWidth:function(options){var screenWidth=$(window).width();var config=$.grep(options.respond,function(item){var range=item.range.split("-");return(screenWidth>=range[0])&&(screenWidth<=range[1])});if(config.length>0){return config[0]}else{return options}}};$.fn.ezPlus=function(options){return this.each(function(){var elevate=Object.create(EZP);elevate.init(options,this);$.data(this,"ezPlus",elevate)})};$.fn.ezPlus.options={attrImageZoomSrc:"svizoom-image",borderColour:"#888",borderSize:4,constrainSize:false,constrainType:false,containLensZoom:false,cursor:"inherit",debug:false,easing:false,easingAmount:12,enabled:true,gallery:false,galleryActiveClass:"sviZoomGalleryActive",gallerySelector:false,galleryItem:"a",imageCrossfade:false,lensBorderColour:"#000",lensBorderSize:1,lensColour:"white",lensFadeIn:false,lensFadeOut:false,lensOpacity:0.4,lensShape:"square",lensSize:200,lenssviZoom:false,loadingIcon:false,mantainZoomAspectRatio:false,maxZoomLevel:false,minZoomLevel:1.01,onComplete:$.noop,onDestroy:$.noop,onImageClick:$.noop,onImageSwap:$.noop,onImageSwapComplete:$.noop,onShow:$.noop,onZoomedImageLoaded:$.noop,preloading:1,respond:[],responsive:true,scrollsviZoom:false,scrollZoomIncrement:0.1,showLens:true,tint:false,tintColour:"#333",tintOpacity:0.4,touchEnabled:true,sviZoomActivation:"hover",sviZoomContainerAppendTo:"body",sviZoomId:-1,sviZoomLevel:1,sviZoomTintFadeIn:false,sviZoomTintFadeOut:false,sviZoomType:"window",sviZoomWindowAlwaysShow:false,sviZoomWindowBgColour:"#fff",sviZoomWindowFadeIn:false,sviZoomWindowFadeOut:false,sviZoomWindowHeight:400,sviZoomWindowOffsetX:0,sviZoomWindowOffsetY:0,sviZoomWindowPosition:1,sviZoomWindowWidth:400,sviZoomEnabled:true,zIndex:1000}})(jQuery,window,document);